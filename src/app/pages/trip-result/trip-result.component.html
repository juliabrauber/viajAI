<div
  *ngIf="trip"
  class="max-w-4xl mx-auto mt-4 flex flex-col h-[calc(100vh-10rem)] space-y-4"
>
  <h2
    class="text-xl font-medium text-blue-800 flex items-center gap-2 px-2 py-1"
  >
    ğŸ—ºï¸ Planejamento para {{ trip.destination }}
  </h2>
  <section
    class="flex-1 flex flex-col gap-4 p-4 bg-transparent overflow-y-auto"
  >
    <div
      *ngFor="let msg of messages"
      class="flex gap-2 items-start"
      [ngClass]="{ 'justify-end': msg.role === 'user' }"
    >
      <span class="text-2xl" *ngIf="msg.role === 'agent'">ğŸ¤–</span>
      <div
        [ngClass]="{
          'bg-white/80 text-gray-900': msg.role === 'agent',
          'bg-gradient-to-br from-blue-100/70 to-blue-50/60 text-blue-900':
            msg.role === 'user'
        }"
        class="px-4 py-2 rounded-2xl shadow-sm max-w-[75%] break-words"
      >
        <markdown [data]="msg.content"></markdown>
      </div>
      <span class="text-2xl" *ngIf="msg.role === 'user'">ğŸ‘¤</span>
    </div>
    <div *ngIf="loading" class="flex gap-2 items-start animate-pulse">
      <span class="text-2xl">âœˆï¸</span>
      <div
        class="bg-white/80 text-gray-900 px-4 py-2 rounded-2xl shadow-sm max-w-[75%]"
      >
        Um momento... estou preparando algumas sugestÃµes para vocÃª!
      </div>
    </div>
  </section>
  <footer class="flex items-center gap-2 mt-2">
    <input
      type="text"
      [(ngModel)]="userMessage"
      (keyup.enter)="sendMessage()"
      placeholder="Digite sua mensagem..."
      class="flex-1 bg-white/80 border-none rounded-2xl px-4 py-1.5 focus:outline-none focus:ring-2 focus:ring-blue-300 placeholder-blue-400"
    />
    <button
      (click)="sendMessage()"
      class="py-2 px-6 bg-blue-700 text-white rounded-2xl font-semibold text-lg hover:bg-blue-600 transition-all shadow-md hover:shadow-lg"
    >
      Enviar
    </button>
  </footer>
</div>
